<script setup>
defineProps({
  alwaysOnTop: {
    type: Boolean,
    required: true,
  },
  audioNotificationEnabled: {
    type: Boolean,
    required: true,
  },
  audioUrl: {
    type: String,
    default: '',
  },
})

defineEmits(['toggleAlwaysOnTop', 'toggleAudioNotification', 'updateAudioUrl', 'testAudio'])
</script>

<template>
  <div class="card">
    <div class="card-header">
      <div class="card-icon bg-green-100">
        <span class="text-2xl">âš™ï¸</span>
      </div>
      <div>
        <h3 class="card-title">
          çª—å£è®¾ç½®
        </h3>
        <p class="card-subtitle">
          é…ç½®çª—å£æ˜¾ç¤ºè¡Œä¸º
        </p>
      </div>
    </div>

    <div class="space-y-6">
      <!-- ç½®é¡¶æ˜¾ç¤ºè®¾ç½® -->
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <span class="w-2 h-2 bg-blue-500 rounded-full mr-3" />
          <div>
            <div class="text-sm font-medium card-text">
              æ€»åœ¨æœ€å‰
            </div>
            <div class="text-xs card-text-secondary">
              å¯ç”¨åçª—å£å°†å§‹ç»ˆä¿æŒåœ¨å…¶ä»–åº”ç”¨ç¨‹åºä¹‹ä¸Š
            </div>
          </div>
        </div>
        <button
          class="relative inline-flex h-6 w-11 items-center rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-white"
          :class="[
            alwaysOnTop ? 'bg-blue-600' : 'bg-gray-300',
          ]"
          @click="$emit('toggleAlwaysOnTop')"
        >
          <span
            class="inline-block h-4 w-4 transform rounded-full bg-white"
            :class="[
              alwaysOnTop ? 'translate-x-6' : 'translate-x-1',
            ]"
          />
        </button>
      </div>

      <!-- éŸ³é¢‘é€šçŸ¥è®¾ç½® -->
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <span class="w-2 h-2 bg-green-500 rounded-full mr-3" />
          <div>
            <div class="text-sm font-medium card-text">
              éŸ³é¢‘é€šçŸ¥
            </div>
            <div class="text-xs card-text-secondary">
              å¯ç”¨ååœ¨MCPå·¥å…·è¢«è§¦å‘æ—¶æ’­æ”¾éŸ³é¢‘æç¤º
            </div>
          </div>
        </div>
        <button
          class="relative inline-flex h-6 w-11 items-center rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-white"
          :class="[
            audioNotificationEnabled ? 'bg-green-600' : 'bg-gray-300',
          ]"
          @click="$emit('toggleAudioNotification')"
        >
          <span
            class="inline-block h-4 w-4 transform rounded-full bg-white"
            :class="[
              audioNotificationEnabled ? 'translate-x-6' : 'translate-x-1',
            ]"
          />
        </button>
      </div>

      <!-- éŸ³æ•ˆURLè®¾ç½® -->
      <div v-if="audioNotificationEnabled" class="pt-4 border-t card-border">
        <div class="flex items-start">
          <span class="w-2 h-2 bg-primary-500 rounded-full mr-3 mt-2" />
          <div class="flex-1">
            <div class="text-sm font-medium card-text mb-2">
              è‡ªå®šä¹‰éŸ³æ•ˆ
            </div>
            <div class="text-xs card-text-secondary mb-3">
              ç•™ç©ºä½¿ç”¨é»˜è®¤éŸ³æ•ˆï¼Œæ”¯æŒæœ¬åœ°æ–‡ä»¶è·¯å¾„æˆ–ç½‘ç»œURLï¼ˆå¦‚ï¼šhttps://example.com/sound.mp3ï¼‰
            </div>
            <div class="flex gap-2">
              <input
                type="text"
                :value="audioUrl"
                placeholder="éŸ³æ•ˆæ–‡ä»¶è·¯å¾„æˆ–URLï¼ˆå¯é€‰ï¼‰"
                class="input flex-1"
                @input="$emit('updateAudioUrl', $event.target.value)"
              >
              <button
                class="btn btn-primary"
                title="è¯•å¬éŸ³æ•ˆ"
                @click="$emit('testAudio')"
              >
                <span class="text-xs">ğŸ”Š</span>
                è¯•å¬
              </button>
            </div>
            <div class="mt-2 text-xs card-text-secondary">
              ç¤ºä¾‹ï¼š/path/to/sound.mp3 æˆ– https://example.com/notification.wav
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
